---
title: Поддержка GiteeSVN

origin-url: https://gitee.ru/help/articles/4131
---

Меры предосторожности перед использованием

1. Не рекомендуется использовать Subversion для репозиториев размером более 300 МБ. Если объем репозитория достигает 400 МБ или 300 МБ, и при этом в нем содержится большое количество нетекстовых данных, мы отключим поддержку Subversion для репозитория.
  
2. Поскольку GIT не поддерживает отправку пустых каталогов, будь то обычный репозиторий или репозиторий с включенной Subversion, он хранится как GIT-репозиторий на машине хранения. Коммиты Subversion отправляются в репозиторий git. Поэтому Gitee's Subversion не поддерживает отправку пустых каталогов.

3. При первом открытии Subversion и работе с репозиторием, если репозиторий большой или в нем много коммитов, время отклика будет больше из-за кэширования.

4. Механизм хуков в Subversion не поддерживается, вместо него используйте вебхуков.

5. Свойства Subversion поддерживаются не полностью.

6. Клиенту необходимо включить поддержку SASL, неподдерживаемые клиенты не могут получить доступ.

7. Некоторые команды svn не поддерживаются. Вы можете проверить совместимость клиента Subversion.

8. Сопоставление номеров версий, в настоящее время расчет номера версии в Subversion основан на количестве коммитов в данной ветке минус один, исключая слияния. Если используются такие операции, как принудительный откат в git, пожалуйста, перепроверьте.

* ПРЕДУПРЕЖДЕНИЕ:*  

> Поскольку при разработке git не учитывал пустые файлы [Kernel.org: Git FAQ](https://git.wiki.kernel.org/index.php/GitFaq#Can_I_add_empty_directories.3F)

> Принцип, который мы разработали, заключается в том, чтобы не ломать или активно модифицировать пользовательский репозиторий. Наш бэкенд хранит полный репозиторий git. Если мы добавим его, содержимое коммитов не будет согласованным. Мы рекомендуем добавлять файл-заполнитель типа .keep при добавлении директории, пустой файл тоже подойдет.

При смешанном использовании Git и SVN старайтесь не использовать Git force push. [Меры предосторожности при использовании Git и SVN вместе](https://git.mydoc.io/?t=122635)

## О ревизии

Права на окончательную интерпретацию функции Subversion принадлежит OSChina.NET. Правила доступа к Subversion могут измениться в следующей ревизии.

## Метод включения

1. Включите его в настройках проекта

![Включить svn](https://images.gitee.ru/uploads/images/2020/0924/202415_8b744022_13510.png)

2. Если это пустой репозиторий:
![Описание изображения](https://images.gitee.ru/uploads/images/2020/0924/202415_443445fc_13510.png)

## Руководство пользователя

Gitee поддерживает протокол SVN. Для SVN проверка обычно используется для получения кода репозитория. На главной странице проекта обычно можно получить URL.

![svn-url](http://static.oschina.net/uploads/space/2015/0318/152207_DRMJ_139664.png)

Адрес репозитория выглядит следующим образом:

```bash
svn://git.oschina.net/svnserver/newos
```  

### 1. Получение кода репозитория

```bash
svn checkout svn://git.oschina.net/svnserver/newos newos
```

**Важное примечание** Интеграция с SVN в Gitee реализована через git-репозиторий, и правило URL имеет следующий вид

Используя приведенную выше команду, мы получим код `дефолтной ветки` проекта. А локальную рабочую директорию мы назовем *newos*.

Если за командой не следует newos, SVN по умолчанию называет локальный рабочий каталог именем проекта

```bash
svn checkout svn://git.oschina.net/svnserver/newos
```

Если вы хотите `получить код из любой ветки`, например, получить dev-ветку newos, введите команду, подобную следующей:

- На данный момент адрес таков: `svn://domain/username/project/branches/branch-name`.

```bash
svn checkout svn://git.oschina.net/svnserver/newos/branches/dev
```

Особое примечание: чтобы получить главную ветку, являющуюся мастер-веткой, вы можете использовать следующий формат ветки

```bash
svn checkout svn://git.oschina.net/svnserver/newos/trunk newos
```

Ветка svn trunk соответствует ветке master. Пользователи должны стараться не использовать следующий формат:
  
```bash
svn checkout svn://git.oschina.net/svnserver/newos
```

## Инструкции по использованию

Если вы проверяете только часть репозитория, а корневой каталог репозитория содержит каталоги типа branches/tags/trunk, используйте полную схему пути следующим образом:

```bash
svn://git.oschina.net/username/example/trunk/tags/hello
svn://git.oschina.net/username/example/branches/dev/trunk
svn://git.oschina.net/username/example/branches/dev/branches
```

Если нет мастер-ветки, то нет и магистральной ветки. В URL-адресе проверенного репозитория нельзя опускать название ветки. Например, если существует только одна ветка dev, вы должны использовать следующий формат, иначе будет выдано сообщение о том, что репозиторий не существует.

```bash
svn co svn://git.oschina.net/svnserver/newos/branches/dev  svnserver_dev
```

Откройте терминал и введите приведенную выше команду. Первое поле аутентификации - это пароль пользователя, который можно оставить пустым. Имя пользователя - это "адрес электронной почты" пользователя, используемый при входе в Gitee. Пароль - это пароль, используемый при входе в Gitee.

Как правило, SVN шифрует и кэширует имя пользователя и пароль, поэтому при первых операциях с репозиторием нужно вводить только email и пароль пользователя.

Очистите кэш паролей, файлы в папке `.subversion/auth/svn.simple` под каталогом пользователя.

![изображение](http://static.oschina.net/uploads/space/2015/0318/153828_ptt4_139664.png)

На следующем рисунке показано успешное извлечение кода проекта.

![Описание изображения](https://images.gitee.ru/uploads/images/2020/0924/202415_c08bc285_13510.png)

Просмотр информации о локальном рабочем каталоге:

```bash
svn info
```

![Описание изображения](https://images.gitee.ru/uploads/images/2020/0924/202415_80c2678b_13510.png)

```bash
cd helloworld
echo "test" > SVNReadMe.md
#svn add SVNReadMe.md
#svn add * --force is similar to git add -A
svn add * --force
svn update .
svn commit -m "first svn commit"
```

Subversion рекомендует использовать `svn update` для обновления рабочей копии перед фиксацией. Это похоже на `git pull` с последующим `git push`.

Для Subversion отправка происходит в режиме онлайн. Если машина находится в оффлайне, отправка будет неудачной. В терминах Git этот процесс можно понимать как git commit+git push.

Пользователи также могут динамически отображать при использовании svn для фиксации кода.

Перечислить содержимое каталогов в репозитории:

```bash
svn list svn://git.net/svnserver/newos/trunk
```

Экспорт всех файлов указанной ветки в репозитории, без информации о контроле версий:

```bash
svn export svn://git.net/svnserver/newos/trunk newos
```

## Примечания

### Установка клиента Subversion

На официальном сайте Apache Foundation's Subversion: 

[http://subversion.apache.org](http://subversion.apache.org)

Страница запроса на загрузку бинарных файлов:  

[http://subversion.apache.org/packages.html](http://subversion.apache.org/packages.html)

#### Система Windows

Интеграция с управлением ресурсами: [TortoiseSVN](http://tortoisesvn.net/downloads.html), широко известный как "Tortoise", - это SVN-клиент, позволяющий легко управлять SVN-репозиториями.

Странно, что TortoiseSVN не рекомендуется для Apache.

Кроме того, существует SlikSVN, адрес для скачивания: [https://sliksvn.com/download/](https://sliksvn.com/download/)

Остальные не будут представлены по одному.

#### Cистема Linux

Как правило, программное обеспечение для управления пакетами, поставляемое с системой Linux, может установить Subversion. Если версия ниже 1.8, рекомендуется скачать прекомпилированные двоичные файлы или скомпилировать Subversion самостоятельно. Больше объяснений здесь нет.

#### OS X

XCode поставляется с Subversion версии 1.7.x, которая является слишком старой, а Gitee поддерживает только SVN-клиенты выше версии 1.8.

Если установлен Homebrew

```bash
brew install subversion
```

В качестве альтернативы можно использовать предварительно скомпилированную версию от WANdisco.

[http://www.wandisco.com/subversion/download#osx](http://www.wandisco.com/subversion/download#osx)

### Совместимость клиента Subversion

Мы поддерживаем Apache Subversion версии 1.8 или выше. При установке клиента Subversion, если появляется сообщение об ошибке 'Could not negotiate a verification method', убедитесь, что ваш клиент поддерживает проверку SASL. Например, на Ubuntu вы можете установить libsasl2-dev, а затем скомпилировать Subversion, чтобы клиент поддерживал проверку SASL.

>sudo apt-get install libsasl2-dev

При использовании интегрированных клиентов svnkit или SubversionJavaHl IDE убедитесь, что они поддерживают SASL-аутентификацию.

### Конвертация между GIT и SVN

Если у пользователя есть проект, размещенный на Subversion, и он хочет перенести его на Gitee, он может использовать git-svn для преобразования проекта в репозиторий на основе git, а затем перенести его на Gitee. Таким образом, они смогут по-прежнему использовать SVN для работы с проектом. Пожалуйста, не забудьте сначала создать новый проект на Gitee.

```bash
git svn clone http://myhost/repo -T trunk -b branches -t tags 
git remote add oscgit https://git.oschina.net/user/repo
git push -u oscgit --all
```

Обычно, если есть локальный SVN-репозиторий, вы можете выполнить следующую операцию:

```bash
git svn clone file:///tmp/svn-repo -T trunk -b branches -t tags 
git remote add oscgit https://git.oschina.net/user/repo
git push -u oscgit  --all
```

После перемещения проекта в Gitee используйте команду svn для проверки и работы с проектом.

Продвинутое руководство:

[http://git-scm.com/book/zh/ch8-2.html](http://git-scm.com/book/zh/ch8-2.html)

### Установите git, git-svn

#### Windows

Официальный сайт msysgit [http://msysgit.github.io/], версия относительно низкая.

Github для Windows предоставляет тот же git-инструмент, что и msysgit.

Скачайте MSYS2 git с сайта [http://sourceforge.net/projects/msys2], затем запустите терминал и установите git. Текущая версия - 2.4.3.

```bash
pacman -S git
```

Ссылка на загрузку Cygwin git: [http://www.cygwin.com/](http://www.cygwin.com/), затем используйте программное обеспечение для управления пакетами или непосредственно загрузите исходный код git для компиляции git.

```bash
make configure
./configure --prefix=/usr/local
make 
make install
```

#### Linux

Если есть менеджер пакетов, выполните установку непосредственно с помощью менеджера пакетов.

Например, в Ubuntu

```bash
sudo apt-get install git git-svn
```

Кроме того, компиляцию можно выполнить вручную.

#### Mac OSX

Ссылка для скачивания: [http://git-scm.com/download/mac](http://git-scm.com/download/mac)