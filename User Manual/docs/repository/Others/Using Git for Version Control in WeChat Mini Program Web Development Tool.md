---
Title: Использование Git для контроля версий в инструменте веб-разработки мини-программы WeChat

origin-url: https://gitee.ru/help/articles/4202
---

## Введение

В процессе разработки мини-программ для WeChat управление версиями кода часто требует использования сторонних инструментов. Хотя "инструмент для веб-разработки WeChat" предоставляет подсказки о состоянии версии файла Git, фактический опыт пользователя все еще неудовлетворителен.

С обновлением 'инструмента для веб-разработки WeChat', последняя бета-версия теперь поддерживает прямое управление 'Git'. В этой статье мы подробно расскажем об использовании 'Git' для контроля версий в 'инструменте для веб-разработки WeChat'.

## Подготовка среды

- Среда разработки: Mac/Windows/Linux - все поддерживается.
- Инструменты разработки: бета-версия инструментов для веб-разработчиков WeChat, Git.
- Служба хостинга Git: [Gitee].

Чтобы воспользоваться сервисом Git, необходимо установить Git в вашей системе. Об установке соответствующей среды Git см. в разделах [Начало работы с Git] и [Установка Git].

Поскольку поддержка управления Git в текущем

## Создайте мини-репозиторий программы

Чтобы использовать Git для контроля версий, вам сначала нужно создать Git-репозиторий. Откройте инструменты для веб-разработчиков WeChat и создайте/откройте репозиторий для вашей мини-программы. В этом примере предположим, что имя репозитория будет 'HelloGitee'. Введите соответствующий путь и 'appid', выберите 'Создать обычный шаблон быстрого запуска', подтвердите и создайте репозиторий.

![](https://images.gitee.ru/uploads/images/2018/0819/215526_c564ebdb_551147.png )

После завершения создания будет получен инициализированный репозиторий.

Инициализация репозитория

## Создание удаленного репозитория

Войдите в свой аккаунт Gitee на [https://gitee.ru] и выберите **'Новый репозиторий'** из новой кнопки в правом верхнем углу. Заполните соответствующую информацию о репозитории проекта.

Здесь мы решили использовать публичный репозиторий, назвали путь "HelloGitee" и выбрали "JavaScript" в качестве языка разработки. Нажмите кнопку "Создать", чтобы инициализировать удаленный репозиторий после подтверждения.

![Создание удаленного репозитория](https://images.gitee.ru/uploads/images/2018/0819/215557_2afe3b88_551147.png)

После создания и инициализации удаленного репозитория мы получим пустой репозиторий, как показано на рисунке ниже. URL-адрес репозитория проекта следующий: `https://gitee.ru/normalcoder/HelloGitee.git`.
Далее мы инициализируем локальный Git-репозиторий.

![](https://images.gitee.ru/uploads/images/2018/0819/215609_49072d52_551147.png )

## Инициализация локального репозитория

Нажмите кнопку "Контроль версий" на панели в "Инструмент для веб-разработчиков WeChat", после чего откроется панель контроля версий в инструменте разработчика.

Поскольку это новый репозиторий и он не был инициализирован как Git-репозиторий, появится запрос на инициализацию репозитория Git. Нажмите на 'Инициализация репозитория Git', затем нажмите 'Подтвердить', чтобы завершить инициализацию локального репозитория.

**Этот шаг эквивалентен выполнению команды 'git init'**.

![](https://images.gitee.ru/uploads/images/2018/0819/215627_888218b0_551147.png )

![](https://images.gitee.ru/uploads/images/2018/0819/215634_fa883863_551147.png )

После инициализации мы можем увидеть локальный репозиторий и текущий статус Git. На следующем изображении показана панель управления версиями после инициализации 'WeChat Web Developer Tool'.

![](https://images.gitee.ru/uploads/images/2018/0819/215642_94c211c4_551147.png )

## Настройка информации о репозитории

После инициализации нажмите 'Рабочее пространство' -> 'Настройки' -> 'Общие' -> 'Редактировать' и отредактируйте имя пользователя и e-mail, используемые в Git. Этот шаг эквивалентен операции настройки в команде 'git config'.

```bash
git config --global user.name "username"
git config --global user.email "email"
```

Обратите внимание, что указанный здесь адрес электронной почты должен совпадать с адресом электронной почты на сайте [Gitee https://gitee.ru], чтобы информация о вкладе могла быть учтена после отправки.

![](https://images.gitee.ru/uploads/images/2018/0819/215654_9e7deafa_551147.png )

![](https://images.gitee.ru/uploads/images/2018/0819/215704_e2a45a94_551147.png )

Перейдите на вкладку 'Remote' в настройках репозитория. В этот момент вы увидите сообщение 'Информация об удаленном репозитории не найдена'. Нажмите на кнопку 'Добавить' и введите ранее созданный адрес удаленного репозитория. Назовите репозиторий '**master**' или выберите собственное имя.

![](https://images.gitee.ru/uploads/images/2018/0819/215713_21fb385d_551147.png )

![](https://images.gitee.ru/uploads/images/2018/0819/215720_370e78a2_551147.png )

После добавления вы сможете увидеть информацию об удаленной ветке в репозитории.

![](https://images.gitee.ru/uploads/images/2018/0819/215731_0ae06a3c_551147.png )

## Отправка кода в удаленный репозиторий

Нажмите кнопку 'Отправить' на панели управления, выберите 'Отправить в новую ветку удаленного репозитория' во всплывающем окне, введите имя '**master**', указывая, что код будет перенесен в 'master' ветку удаленного репозитория, а затем нажмите 'OK'.

![](https://images.gitee.ru/uploads/images/2018/0819/215746_448ce1f9_551147.png )

После переноса мы можем увидеть информацию о ветке в разделе 'удалённый репозиторий'. Зайдя в репозиторий на 'Gitee', мы также можем увидеть информацию о переносе. На этом мы завершили процесс переноса кода из локального репозитория в удаленный репозиторий.

![](https://images.gitee.ru/uploads/images/2018/0819/215754_abe86fe9_551147.png )

![](https://images.gitee.ru/uploads/images/2018/0819/215801_e9136721_551147.png )

## Меры предосторожности и настройки авторизации идентификации

Если при отправке push-уведомления вы столкнулись с ошибкой, необходимо проверить авторизацию пользователя. Это может означать, что "Инструмент веб-разработчика WeChat" не прочитал конфигурацию авторизации SSH локального пользователя. Вам необходимо установить информацию об авторизации пользователя в инструменте разработки.

![](https://images.gitee.ru/uploads/images/2018/0819/215808_0bf8ca78_551147.png )

После инициализации последовательно нажмите "Рабочая область" -> "Настройки" -> "Сеть и аутентификация" -> "Метод аутентификации". Вы можете выбрать метод аутентификации для удаленного репозитория. По умолчанию используется "Автоматически".

Выберите "Введите имя пользователя и пароль", введите учетную запись Gitee и пароль ниже, а затем снова выполните операцию push.

![](https://images.gitee.ru/uploads/images/2018/0819/215818_df7a9b9a_551147.png )

## Модификация и фиксация кода

Далее давайте изменим наш код.

Нажмите на кнопку "Контроль версий" на панели инструментов разработки, закройте панель "Контроль версий", откройте "pages/index/index.wxml" и измените содержимое "Get Avatar Nickname" на "My First Modification Commit", затем сохраните.

![](https://images.gitee.ru/uploads/images/2018/0819/215829_65697052_551147.png )

Снова переключитесь на панель "Контроль версий", и вы увидите, что в текущей локальной ветке есть файл, ожидающий фиксации. Выберите и проверьте файл, чтобы просмотреть изменения, внесенные в текущий файл.

![](https://images.gitee.ru/uploads/images/2018/0819/215840_757b3b0d_551147.png )

Заполните сообщение о коммите в расположенном ниже поле коммита, нажмите "Коммит" и **отправьте код в основную ветку локального репозитория**. После отправки вы сможете просмотреть запись о коммите в локальной ветке репозитория.

![](https://images.gitee.ru/uploads/images/2018/0819/215847_6b95df4b_551147.png )

Далее мы снова отправим код из локальной ветки в удаленный репозиторий. Нажмите кнопку "Push" на панели операций, выберите "Push в следующую ветку удаленного репозитория" во всплывающем окне, выберите существующую ветку `master` удаленного репозитория, а затем нажмите "OK".

![](https://images.gitee.ru/uploads/images/2018/0819/215853_456a28a3_551147.png )

После завершения процесса push вы сможете увидеть отправленные изменения кода на домашней странице соответствующего репозитория в [Gitee].

![](https://images.gitee.ru/uploads/images/2018/0819/215901_7356122d_551147.png )

## Заключение

В описанных выше операциях мы использовали функцию управления версиями в `инструментах для веб-разработчиков WeChat` для контроля и управления версией кода мини-программы и зафиксировали ее в удаленном репозитории Git.

В реальной разработке проекта мы можем в полной мере использовать возможности Git для контроля версий и совместной работы, гибко сотрудничать с другими, а затем стандартизировать управление кодом и сотрудничать более эффективно.

[Gitee]:https://gitee.ru
[Git Getting Started]:https://gitee.ru/help/categories/20
[Git Installation]: https://gitee.ru/help/articles/4106
[WeChat Web Developer Tools]:https://developers.weixin.qq.com/miniprogram/dev/devtools/devtools.html
[WeChat Web Developer Tools Beta Version Download]: https://developers.weixin.qq.com/miniprogram/dev/devtools/devtools.html