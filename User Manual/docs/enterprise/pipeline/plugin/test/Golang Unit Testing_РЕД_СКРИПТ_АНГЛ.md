---
title: Модульное тестирование на Golang
description: Модульное тестирование на Golang
slug: /enterprise/pipeline/plugin/golang-unit-test
keywords:
 - Gitee
 - Golang
 - Модульное тестирование
---

## Знакомство с формой

Выберите подходящую версию Golang из выпадающего списка. Плагин инициализирует среду Golang в соответствии с выбранной версией.

- **Тестовая команда**: Команда test - это пользовательская команда для тестирования. Команда выполняется в корневом каталоге репозитория кода и поддерживает доступ к переменным окружения с помощью ${parameter key}. Обратите внимание, что добавление 'set -e' может управлять автоматическим завершением команд скрипта при возникновении ошибки.

```shell
# By default, goproxy.cn is used and users can manually adjust
export GOPROXY=https://goproxy.cn
# Default Unit Test Command
# Output test report directory to the current working directory, which can be automatically uploaded and displayed
mkdir -p golang-report
# Users who do not use Go Mod need to uncomment the following
# export GOFLAGS=-mod=vendor
go test -v -json -cover -coverprofile cover.out ./... > golang-report/report.jsonl
go tool cover -html=cover.out -o golang-report/index.html
```

- **Каталог отчетов о тестировании**: Каталог отчеов о тестировании - это каталог, в котором находится отчет о тестировании, созданный после выполнения команды тестирования, например, golang-report.

Файл отчета о тестировании: Файл отчета о тестировании - это файл отчета о тестировании в формате JSON с именем report.jsonl.

- **Файл записи отчета о тестировании**: Файл ввода отчета о тестировании - это имя html-файла ввода отчета о тестировании, например index.html.

- **Ворота качества**: В плагине тестирования можно настроить ворота качества. Если фактические показатели во время выполнения задачи будут ниже настроенных, то вступят в силу ворота. Задача конвейера будет помечена как неудачная, и последующие задачи не будут продолжать выполняться.
- Покрытие строк: Процент исполняемых операторов, которые были выполнены, от общего числа исполняемых операторов (без учета таких вещей, как объявления заголовочных файлов C++, комментарии к коду, пустые строки и т. д.).
  - Коэффициент прохождения теста: Процент прохождения тестов

- **Кэш сборки**:

> Параметр кэша поддерживает как абсолютные, так и относительные пути, например:

- /root/.m2
- ~/.m2
- xxx/xxx относительно корневого каталога хранилища кода
- /root/workspace/xxx

> Пояснение правила:

- Так называемый кэш по сути означает хранение модулей, которые неоднократно используются в нашем конвейере, в загруженном S3. Когда конвейер запускается снова, файл кэша загружается и извлекается из S3.
Только после успешной сборки конвейера обновленные файлы кэша будут загружены.
- Срок действия файлов кэша по умолчанию истекает через 30 дней.
- Каждое срабатывание конвейера может продлить срок действия кэша (даже если сборка не удалась)