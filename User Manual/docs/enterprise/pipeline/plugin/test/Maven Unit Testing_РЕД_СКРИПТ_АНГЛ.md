---
title: Модульное тестирование Maven
description: Модульное тестирование Maven
slug: /enterprise/pipeline/plugin/maven-unit-test
keywords:
 - Gitee
 - Maven
 - Модульное тестирование
---

## Знакомство с формой

- **Версия JDK**: Выберите соответствующую версию JDK из выпадающего списка. Плагин инициализирует окружение JDK на основе выбранной версии.

- **Maven Version**: Выберите соответствующую версию Maven из выпадающего списка. Во время выполнения плагин инициализирует окружение Maven на основе выбранной версии.

- **Команда test**: Команда test - это пользовательская команда для тестирования. Команда выполняется в корневом каталоге репозитория кода и поддерживает доступ к переменным окружения с помощью ${parameter key}. Обратите внимание, что добавление 'set -e' может управлять автоматическим завершением команд сценария при возникновении ошибки.

```shell
# Parameter Description:
#    -Dmaven.test.failure.ignore: Continue building even if unit tests fail
#    -B: Runs in batch mode, which can avoid ArrayIndexOutOfBoundsException exceptions when printing logs.
mvn -B test -Dmaven.test.failure.ignore=true
# Create Surefire test report in HTML format, this command does not run tests, only builds the report
mvn surefire-report:report-only
# Put the required CSS and images resources for the report in the same directory as surefire-report.html (${basedir}/target/site/)
mvn site -DgenerateReports=false
```

- **Каталог отчетов о тестировании**: Каталог отчета о тестировании - это каталог, в котором находится отчет о тестировании, созданный после выполнения команды тестирования.

Входной файл для отчета о тестировании - это имя входного файла отчета о тестировании, например surefire-report.html

- **Ворота качества**: В плагине тестирования можно настроить ворота качества. Если фактические показатели во время выполнения задачи будут ниже настроенных, то вступят в силу ворота. Задача конвейера будет помечена как неудачная, и последующие задачи не будут выполняться.
  - Коэффициент прохождения теста: Процент прохождения тестов

- **Частный репозиторий**:
    - **Учетные данные репозитория**: Управляйте удаленными репозиториями зависимостей, добавляя учетные данные. Инструкции по добавлению учетных данных см. в [Конфигурация учетных данных в настройках Maven](/).
    - **Тип репозитория**: Релизный репозиторий или репозиторий моментальных снимков.

- **Кэш сборки**:

> Параметр кэша поддерживает как абсолютные, так и относительные пути, например:

- /root/.m2
- ~/.m2
- xxx/xxx относительно корневого каталога хранилища кода
- /root/workspace/xxx

> Пояснение правила:

- Так называемый кэш по сути означает хранение модулей, которые неоднократно используются в нашем конвейере, в загруженном S3. Когда конвейер запускается снова, файл кэша загружается и извлекается из S3.
Только после успешной сборки конвейера обновленные файлы кэша будут загружены.
- Срок действия файлов кэша по умолчанию истекает через 30 дней.
- Каждое срабатывание конвейера может продлить срок действия кэша (даже если сборка не удалась)