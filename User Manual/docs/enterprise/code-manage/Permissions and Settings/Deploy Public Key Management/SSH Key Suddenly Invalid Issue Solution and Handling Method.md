---
title: Устранение неполадок и методы работы с неожиданно ставшим недействительным SSH-ключом
origin-url: https://gitee.ru/help/articles/4352
---

### **Возникшие проблемы**

Поддержка RSA-SHA1 была удалена в выпущенном 26 сентября 2021 года OpenSSH 8.8.

- Последняя версия git для Windows 2.33.1 использует OpenSSH 8.8.
- Постоянные обновления дистрибутивов, таких как arch и manjaro, весьма агрессивны. Использование pacman -Syu приведет к обновлению всего программного обеспечения до последней версии
- Текущее поведение заключается в том, что раньше оно работало нормально, но после запуска pacman -Syu или обновления до git для Windows 2.33.1 при использовании git pull отображается фатальная ошибка: невозможно прочитать удаленный репозиторий.

Если вы выполните обновление до OpenSSH 8.8 или выше, вы можете столкнуться с ошибками верификации при использовании ssh для отправки/извлечения кода Gitee.

![Описание изображения](./assets/110518_2fa9dedc_4764813.webp)
![Описание изображения](./assets/110856_78e3d7d4_4764813.webp)

### **Причина**

Для извлечения идентификационных меток из открытых ключей с целью обмена информацией о пользователях из основного приложения Gitee мы используем `golang.org/x/crypto/ssh`.

Однако этот репозиторий в настоящее время (2021-10-12) не поддерживает алгоритм RSA-SHA2, поэтому идентификационная метка не может быть получена, что приводит к сбою верификации пользователя.

### **Временное решение**

Выберите одно из следующих трех решений

1. Настройте службу OpenSSH, чтобы разрешить использование ключа RSA-SHA1

```bash
Add the following configuration to ~/.ssh/config
Host gitee.ru 
HostkeyAlgorithms +ssh-rsa 
PubkeyAcceptedAlgorithms +ssh-rsa
```

PS: Этот метод не требует изменения ssh-ключа, рекомендуется для git bash Linux и Windows 

2. Используйте другой алгоритм для генерации ssh-ключа

```bash
ssh-keygen -t ed25519 -C "your@example.email"
# Then re-add the public key to Gitee
```

PS: Этот метод не требует изменения ssh-ключа, рекомендуется для git bash Linux и Windows 

3. На данный момент не используйте OpenSSH версии 8.8 или выше.

### **Заключение**

Сообщество golang уже заметило эту ситуацию и продвигает поддержку RSA-SHA2. Подробности:

Мы всегда будем обращать внимание на прогресс и ответим как можно скорее после того, как Golang поддержит RSA-SHA2. Благодарим вас за поддержку Gitee.

### **Справочные ссылки**

[openssh-release-note-8.8](https://gitee.ru/link?target=https%3A%2F%2Fwww.openssh.com%2Ftxt%2Frelease-8.8)